"use strict";(self.webpackChunkequabli_front_end=self.webpackChunkequabli_front_end||[]).push([[618],{7382:function(e,n,r){var t=r(2791),o=r(129),s=r(7022),a=r(3360),i=r(184);n.Z=function(e){var n=e.onHide,r=e.show,c=e.confirmDelete,u=e.text,l=void 0===u?"Deletion":u,d=e.actionText,h=void 0===d?"Delete":d,m=e.details,f=e.type,p=(0,t.useRef)(null);return(0,t.useEffect)((function(){}),[]),(0,i.jsxs)(o.Z,{show:r,onHide:n,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"sm",animation:!0,children:[(0,i.jsx)(o.Z.Header,{closeButton:!0,children:(0,i.jsxs)(o.Z.Title,{id:"contained-modal-title-vcenter",children:["Confirm ",l]})}),m&&"myDocument"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete the ",(0,i.jsx)("b",{children:m.folderName})," folder"]})})}),m&&"costConfiguration"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Cost Configuration for ",(0,i.jsx)("b",{children:m.documentType})]})})}),m&&"requiredDocuments"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Required Document Configuration for ",(0,i.jsx)("b",{children:m.productName})]})})}),m&&"sentDocumentRequest"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Document Request for ",(0,i.jsx)("b",{children:m.documentType})," requested from ",(0,i.jsx)("b",{children:m.requestedFrom})]})})}),m&&"receiveDocumentRequest"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Document Request for ",(0,i.jsx)("b",{children:m.documentType})," requested from ",(0,i.jsx)("b",{children:m.requestedFrom})]})})}),(0,i.jsxs)(o.Z.Footer,{children:[(0,i.jsx)(a.Z,{variant:"danger",ref:p,onClick:c,children:h}),(0,i.jsx)(a.Z,{variant:"dark",onClick:n,children:"Cancel"})]})]})}},7919:function(e,n,r){r.d(n,{Z:function(){return v}});var t=r(2982),o=r(885),s=r(2791),a=r(129),i=r(6149),c=r(9743),u=r(2677),l=r(2105),d=r(2576),h=r(3360),m=r(6030),f=r(4561),p=(r(8901),r(5880)),y=r(8311),E=r(1635),S=r(758),D=r(2453),_=function(e){return function(n){n({type:S.Xt.SHARE_FOLDER_REQUEST,payload:[]}),D.Gy.shareFolder(e).then((function(e){n(function(e){return{type:S.Xt.SHARE_FOLDER_SUCCESS,payload:e}}(e))}),(function(e){n({type:S.Xt.SHARE_FOLDER_FAILURE,payload:[]})})).finally((function(){n({type:S.Xt.SHARE_FOLDER_RESET})}))}},x=function(e){return function(n){n({type:S.VV.SHARE_FILE_REQUEST,payload:[]}),D.Gy.shareDocument(e).then((function(e){n(function(e){return{type:S.VV.SHARE_FILE_SUCCESS,payload:e}}(e))}),(function(e){n({type:S.VV.SHARE_FILE_FAILURE,payload:[]})})).finally((function(){n({type:S.VV.SHARE_FILE_RESET})}))}},Z=function(e){return function(n){n({type:S.z$.REVOKE_FILE_REQUEST,payload:[]}),D.Gy.revokeShareDocument(e).then((function(e){n(function(e){return{type:S.z$.REVOKE_FILE_SUCCESS,payload:e}}(e))}),(function(e){n({type:S.z$.REVOKE_FILE_FAILURE,payload:[]})})).finally((function(){n({type:S.z$.REVOKE_FILE_RESET})}))}},g=r(8820),j=r(184),v=function(e){var n=e.show,r=e.onHide,S=e.parentComponent,D=e.searchHandler,v=(0,s.useState)(n),w=(0,o.Z)(v,2),F=w[0],R=w[1],A=(0,m.I0)(),N=(0,s.useRef)(),O=(0,s.useState)({shareDetail:!1}),L=(0,o.Z)(O,2),C=L[0],T=L[1],H=(0,s.useState)(!1),k=(0,o.Z)(H,2),b=k[0],I=k[1],U=(0,s.useState)([]),W=(0,o.Z)(U,2),q=W[0],V=W[1],z=(0,s.useState)(null),P=(0,o.Z)(z,2),Y=P[0],B=P[1],G=(0,s.useState)([]),K=(0,o.Z)(G,2),Q=K[0],X=K[1],$=(0,m.v9)((function(e){return{users:e.users.data,loading:e.users.loading,error:e.users.error}})),M=$.users,J=$.loading;$.error;(0,s.useEffect)((function(){me(F)}),[F,M]);var ee=(0,m.v9)((function(e){return{shareFolderLoading:e.share.shareFolderLoading,shareFolderSuccess:e.share.shareFolderSuccess,shareFolderError:e.share.shareFolderError,shareFileLoading:e.share.shareFileLoading,shareFileSuccess:e.share.shareFileSuccess,shareFileError:e.share.shareFileError,revokeFolderLoading:e.share.revokeFolderLoading,revokeFolderSuccess:e.share.revokeFolderSuccess,revokeFolderError:e.share.revokeFolderError,revokeFileLoading:e.share.revokeFileLoading,revokeFileSuccess:e.share.revokeFileSuccess,revokeFileError:e.share.revokeFileError}})),ne=ee.shareFolderLoading,re=ee.shareFolderSuccess,te=ee.shareFolderError,oe=ee.shareFileLoading,se=ee.shareFileSuccess,ae=ee.shareFileError,ie=ee.revokeFolderLoading,ce=ee.revokeFolderSuccess,ue=ee.revokeFolderError,le=ee.revokeFileLoading,de=ee.revokeFileSuccess,he=ee.revokeFileError;(0,s.useEffect)((function(){if(re||se){var e,n=Object.assign({},F);(e=n.sharedWith).push.apply(e,(0,t.Z)(q)),N.current.clear(),I(!1),R(n),D()}}),[ne,re,te,oe,se,ae]),(0,s.useEffect)((function(){if(ce||de){var e=Object.assign({},F);e.sharedWith=e.sharedWith.filter((function(e){if(e.email!==Y)return e})),I(!1),R(e),B(null),D()}}),[ie,ce,ue,le,de,he]),(0,s.useEffect)((function(){A(E.c.getConnectedUsers())}),[]);var me=function(e){var n=[],r=Object.assign({},e).sharedWith.map((function(e){return e.email}));M.map((function(e){return-1===r.indexOf(e.loginKey)&&n.push(e),!0})),X(n)};return(0,j.jsxs)(a.Z,{show:n,onHide:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",animation:!0,children:[(0,j.jsx)(a.Z.Header,{closeButton:!0,children:(0,j.jsxs)(a.Z.Title,{id:"contained-modal-title-vcenter",children:['Share "',(0,j.jsx)("b",{children:"".concat("myDocument"===S?F.folderName:F.documentName)}),'"']})}),(0,j.jsxs)(a.Z.Body,{className:"show-grid",children:[(0,j.jsx)(i.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(u.Z,{lg:12,md:6,className:"no_padding",children:(0,j.jsxs)(i.Z.Group,{as:u.Z,className:"mb-1 mt-4",children:[(0,j.jsx)(u.Z,{md:12,sm:12,children:(0,j.jsx)(f.pY,{isLoading:J,id:"public-methods-example",labelKey:"modifiedFirstName",multiple:!0,ref:N,allowNew:!0,newSelectionPrefix:"Not a Platform User: ",onChange:function(e){I(!0);var n=e.map((function(e){return{name:e.firstName,email:e.loginKey||e.firstName,isRegisterUser:!e.customOption,principleId:e.principleId,orgType:e.orgType,userOrgCode:e.orgCode}}));V(n)},options:Q})}),(0,j.jsx)("span",{style:{color:"red",paddingLeft:"1rem"},children:(0,j.jsx)("small",{children:C.shareDetail?"At least one recipient is required ":""})}),(0,j.jsx)(i.Z.Label,{className:"label_custom white",children:"Add People"})]})})})}),(0,j.jsxs)(u.Z,{sm:12,children:[(0,j.jsx)("p",{className:y.Z.people_share_with,children:"People with Access"}),(te||ae)&&(0,j.jsx)(l.Z,{placement:"right",delay:{show:250,hide:400},overlay:(0,j.jsx)(d.Z,{id:"tooltip-error",children:"Error in fetching"}),children:(0,j.jsx)(g.CSE,{size:20,className:y.Z.details_warning})}),(!te||!ae)&&(ne||oe)&&(0,j.jsx)(p._5g,{size:20,className:"spinner ".concat(y.Z.details_warning)}),F.sharedWith&&F.sharedWith.length>0&&(0,j.jsx)("ul",{className:y.Z.share_with_ul,children:F.sharedWith.map((function(e,n){return(0,j.jsxs)("li",{className:y.Z.share_with_li,children:[(0,j.jsxs)("div",{className:y.Z.share_with_div,children:[(0,j.jsxs)("div",{className:"share_With_parent",style:{marginRight:"1rem"},children:[e.profilePicture&&(0,j.jsx)("img",{src:e.profilePicture,className:"profile_pic_account",alt:""}),!e.profilePicture&&(0,j.jsx)("span",{className:"shared_with ".concat(y.Z.share_with_span_pic),children:(0,j.jsx)("span",{children:e.name.charAt(0)})})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:y.Z.share_with_p,children:[e.userOrgCode||e.orgCode," - ",e.name]}),(0,j.jsx)("p",{className:y.Z.share_with_p,children:e.email})]})]}),(0,j.jsx)("div",{children:(0,j.jsxs)(h.Z,{className:y.Z.share_with_button,variant:"dark",onClick:function(){return function(e){var n={};n.email=e.email,B(e.email),A(Z(n))}(e)},children:[(0,j.jsx)(p.Fuw,{size:20,style:{margin:"0 .5rem",cursor:"pointer"}}),"Revoke Access"]})})]},"li_".concat(n))}))}),F.sharedWith&&0===F.sharedWith.length&&(0,j.jsx)("p",{style:{textAlign:"center"},children:"No record Found"})]})]}),(0,j.jsx)(a.Z.Footer,{children:(0,j.jsx)(h.Z,{variant:"dark",style:{width:"100%"},disabled:!b,onClick:function(){var e={};e.shareDetail=q,function(e){var n=!0,r={shareDetail:!1};for(var t in e)e[t]&&""!==e[t]||(r[t]=!0),0===e.shareDetail.length&&(r.shareDetail=!0);for(var o in r)r[o]&&(n=!1);return T(r),n}(e)&&("documents"===S?(e.documentId=F.id,A(x(e))):(e.clientAccountNo=F.folderName,A(_(e))))},children:"Share"})})]})}},5333:function(e,n,r){r.r(n);var t=r(4165),o=r(5861),s=r(1413),a=r(885),i=r(2791),c=r(2677),u=r(9743),l=r(3360),d=r(2092),h=r(6030),m=r(7122),f=r(9369),p=r(8192),y=r(3619),E=r(3363),S=r(8803),D=r(3926),_=r(1679),x=r(7382),Z=r(7919),g=r(4663),j=r(7445),v=r(184);n.default=function(e){var n=e.location,r=(0,h.I0)(),w=(0,d.e1)().addToast,F=(0,i.useRef)(),R=new URLSearchParams(n.search).get("account_id"),A=(0,i.useState)(!1),N=(0,a.Z)(A,2),O=N[0],L=N[1],C=(0,i.useState)("documentName"),T=(0,a.Z)(C,2),H=T[0],k=T[1],b=(0,i.useState)("desc"),I=(0,a.Z)(b,2),U=I[0],W=I[1],q=(0,i.useState)(10),V=(0,a.Z)(q,2),z=V[0],P=V[1],Y=(0,i.useState)(1),B=(0,a.Z)(Y,2),G=B[0],K=B[1],Q=(0,i.useState)(!1),X=(0,a.Z)(Q,2),$=X[0],M=X[1],J=(0,i.useState)(!1),ee=(0,a.Z)(J,2),ne=ee[0],re=ee[1],te=(0,i.useState)(null),oe=(0,a.Z)(te,2),se=oe[0],ae=oe[1],ie=(0,i.useState)([]),ce=(0,a.Z)(ie,2),ue=ce[0],le=ce[1],de=(0,i.useState)(!1),he=(0,a.Z)(de,2),me=he[0],fe=he[1],pe=(0,i.useState)(null),ye=(0,a.Z)(pe,2),Ee=ye[0],Se=ye[1],De=(0,i.useState)(null),_e=(0,a.Z)(De,2),xe=_e[0],Ze=_e[1],ge=(0,g.Z)(),je=(0,a.Z)(ge,2),ve=je[0],we=je[1],Fe=we.setInitObj,Re=we.textSearch,Ae=we.advanceSearch,Ne=we.resetHandler,Oe=(0,h.v9)((function(e){return{documents:e.myDocuments.documents.data,totalCount:e.myDocuments.documents.totalCount,error:e.myDocuments.documents.error,columns:e.myDocuments.documents.columns,loading:e.myDocuments.documents.loading,defaultColumns:e.misc.allTableColumns.data,deleteRequest:e.myDocuments.documents.deleteRequest,deleteSuccess:e.myDocuments.documents.deleteSuccess,deleteError:e.myDocuments.documents.deleteError,downloadRequest:e.myDocuments.documentDownload.loading,downloadError:e.myDocuments.documentDownload.error,downloadSuccess:e.myDocuments.documentDownload.success,downloadLink:e.myDocuments.documentDownload.downloadLink}})),Le=Oe.documents,Ce=Oe.totalCount,Te=(Oe.error,Oe.columns),He=Oe.loading,ke=Oe.defaultColumns,be=(Oe.deleteRequest,Oe.deleteSuccess),Ie=Oe.deleteError,Ue=Oe.downloadRequest,We=Oe.downloadError,qe=Oe.downloadSuccess,Ve=Oe.downloadLink;(0,i.useEffect)((function(){return Fe({pageSize:z,pageNumber:G,textSearch:null,sortOrder:U,sortParam:H}),function(){r(y.p.resetDocumentList())}}),[]),(0,i.useEffect)((function(){null!==ve&&ze(z,G)}),[ve,H,U]),(0,i.useEffect)((function(){if(!He&&0===(null===Te||void 0===Te?void 0:Te.length)&&ke&&ke.length>0){var e=ke.filter((function(e){if("documentFolder"===e.tableName)return e}));le(e[0].columnNames)}else le(Te)}),[Te]),(0,i.useEffect)((function(){be&&(w((0,_.t)("success","deleted","Document"),{appearance:"success",autoDismiss:!0}),fe(!1),ze(z,G)),Ie&&w((0,_.t)("error","deleting","document"),{appearance:"error",autoDismiss:!1})}),[be,Ie]);var ze=function(e,n){ve=(0,s.Z)((0,s.Z)({},ve),{},{pageSize:e,pageNumber:n,accountNumber:R,sortParam:H,sortOrder:U}),r(y.p.getMyDocumentList(ve)),L(!1)},Pe=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w((0,_.t)("info","DOWNLOAD_STARTED",""),{appearance:"info",autoDismiss:!0}),e.next=3,(0,S.Ce)(n);case 3:r(j.w.saveDownloadHistory([n.id])),w((0,_.t)("info","DOWNLOAD_SUCCESSFUL",""),{appearance:"success",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){!Ue&&qe&&Ve&&((0,S.f2)(Ve),r(y.p.restDownloadDocument()))}),[Ue,We,qe,Ve]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("a",{href:"",ref:F,target:"_self"}),(0,v.jsxs)(c.Z,{sm:12,children:[(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(D.Z,{parentComponent:"documents",Styles:m.Z,showAdvanceSearch:O,setShowAdvanceSearch:function(e){return L(e)},textSearchHook:Re,searchObj:ve,advanceSearchHook:Ae,resetHandlerHook:Ne}),(0,v.jsx)(c.Z,{md:2,sm:2,children:(0,v.jsx)(l.Z,{variant:"dark",style:{width:"100%"},onClick:function(){return M(!0)},children:"Upload Document"})})]}),(0,v.jsx)("br",{})]}),(0,v.jsx)(c.Z,{children:(0,v.jsx)(f.Z,{data:Le,isLoading:He,map:{documentName:"Name",documentType:"Document Type",originalAccountNo:"Original Account Number",equabliAccountNo:"Equabli Account Number",clientAccountNo:"Client Account Number",generateDate:"Generated Date",uploadDate:"Upload Date",shareDate:"Share Date",receiveDate:"Receive Date",fileSize:"File Size",sharedBy:"Shared By",sharedWith:"Shared With"},totalCount:Ce,actionArray:["documentName"],handleNavigate:function(e){re(!0),ae(e)},currencyColumns:[],sortElement:function(e){return k(e)},sortType:function(e){return W(e)},currentPage:G,setCurrentPage:K,parentComponent:"documents",searchCriteria:{},hideShareArray:ue,addEditArray:{download:function(e){return Pe(e)},share:function(e){return Ze(e)},view:function(e){re(!0),ae(e)},delete:function(e){return Se(e),void fe(!0)}},onPaginationChange:function(e,n){return function(e,n){P(e),ze(e,n)}(e,n)}})}),$&&(0,v.jsx)(p.Z,{show:$,onHide:function(){return M(!1)},accountId:123,Styles:m.Z,parentComponent:"documents",search:ze,details:{accountId:R}}),ne&&(0,v.jsx)(E.Z,{show:ne,onHide:function(){return re(!1)},documentData:se}),me&&(0,v.jsx)(x.Z,{show:me,onHide:function(){return fe(!1)},confirmDelete:function(){r(y.p.deleteDocument(Ee.id))},details:Ee,type:"documents"}),xe&&(0,v.jsx)(Z.Z,{show:xe,parentComponent:"documents",onHide:function(){return Ze(null)},searchHandler:function(){return ze(z,G)}})]})}},7445:function(e,n,r){r.d(n,{w:function(){return s}});var t=r(758),o=r(2453),s={getDownloadHistory:function(e){return function(n){n({type:t.oe.GET_DOWNLOAD_HISTORY_REQUEST}),o.OA.getDownloadHistory(e).then((function(e){n(function(e){return{type:t.oe.GET_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.oe.GET_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))}))}},saveDownloadHistory:function(e){return function(n){n({type:t.Fq.SAVE_DOWNLOAD_HISTORY_REQUEST}),o.OA.saveDownloadHistory(e).then((function(e){n(function(e){return{type:t.Fq.SAVE_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.Fq.SAVE_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))})).finally((function(){return n({type:t.Fq.SAVE_DOWNLOAD_HISTORY_RESET})}))}},deleteDownloadHistory:function(e){return function(n){n({type:t.wA.DELETE_DOWNLOAD_HISTORY_REQUEST}),o.OA.deleteDownloadHistory(e).then((function(e){n(function(e){return{type:t.wA.DELETE_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.wA.DELETE_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))})).finally((function(){return n({type:t.wA.DELETE_DOWNLOAD_HISTORY_RESET})}))}}}}}]);
//# sourceMappingURL=618.1935eb0b.chunk.js.map