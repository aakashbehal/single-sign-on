"use strict";(self.webpackChunkequabli_front_end=self.webpackChunkequabli_front_end||[]).push([[618],{7382:function(e,n,r){var t=r(2791),o=r(129),s=r(7022),a=r(3360),i=r(184);n.Z=function(e){var n=e.onHide,r=e.show,c=e.confirmDelete,u=e.text,l=void 0===u?"Deletion":u,d=e.actionText,h=void 0===d?"Delete":d,m=e.details,f=e.type,p=(0,t.useRef)(null);return(0,t.useEffect)((function(){}),[]),(0,i.jsxs)(o.Z,{show:r,onHide:n,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"sm",animation:!0,children:[(0,i.jsx)(o.Z.Header,{closeButton:!0,children:(0,i.jsxs)(o.Z.Title,{id:"contained-modal-title-vcenter",children:["Confirm ",l]})}),m&&"myDocument"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete the ",(0,i.jsx)("b",{children:m.folderName})," folder"]})})}),m&&"costConfiguration"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Cost Configuration for ",(0,i.jsx)("b",{children:m.documentType})]})})}),m&&"requiredDocuments"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Required Document Configuration for ",(0,i.jsx)("b",{children:m.productName})]})})}),m&&"sentDocumentRequest"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Document Request for ",(0,i.jsx)("b",{children:m.documentType})," requested from ",(0,i.jsx)("b",{children:m.requestedFrom})]})})}),m&&"receiveDocumentRequest"===f&&(0,i.jsx)(o.Z.Body,{className:"show-grid",children:(0,i.jsx)(s.Z,{children:(0,i.jsxs)("p",{children:["Are you sure you want to delete Document Request for ",(0,i.jsx)("b",{children:m.documentType})," requested from ",(0,i.jsx)("b",{children:m.requestedFrom})]})})}),(0,i.jsxs)(o.Z.Footer,{children:[(0,i.jsx)(a.Z,{variant:"danger",ref:p,onClick:c,children:h}),(0,i.jsx)(a.Z,{variant:"dark",onClick:n,children:"Cancel"})]})]})}},7919:function(e,n,r){r.d(n,{Z:function(){return v}});var t=r(2982),o=r(885),s=r(2791),a=r(129),i=r(6149),c=r(9743),u=r(2677),l=r(2105),d=r(2576),h=r(3360),m=r(6030),f=r(4561),p=(r(8901),r(5880)),y=r(8311),S=r(1635),E=r(758),D=r(2453),x=function(e){return function(n){n({type:E.Xt.SHARE_FOLDER_REQUEST,payload:[]}),D.Gy.shareFolder(e).then((function(e){n(function(e){return{type:E.Xt.SHARE_FOLDER_SUCCESS,payload:e}}(e))}),(function(e){n({type:E.Xt.SHARE_FOLDER_FAILURE,payload:[]})}))}},_=function(e){return function(n){n({type:E.VV.SHARE_FILE_REQUEST,payload:[]}),D.Gy.shareDocument(e).then((function(e){n(function(e){return{type:E.VV.SHARE_FILE_SUCCESS,payload:e}}(e))}),(function(e){n({type:E.VV.SHARE_FILE_FAILURE,payload:[]})})).finally((function(){n({type:E.VV.SHARE_FILE_RESET})}))}},g=function(e){return function(n){n({type:E.z$.REVOKE_FILE_REQUEST,payload:[]}),D.Gy.revokeShareDocument(e).then((function(e){n(function(e){return{type:E.z$.REVOKE_FILE_SUCCESS,payload:e}}(e))}),(function(e){n({type:E.z$.REVOKE_FILE_FAILURE,payload:[]})}))}},Z=r(8820),j=r(184),v=function(e){var n=e.show,r=e.onHide,E=e.parentComponent,D=e.searchHandler,v=(0,s.useState)(n),w=(0,o.Z)(v,2),F=w[0],A=w[1],N=(0,m.I0)(),O=(0,s.useRef)(),R=(0,s.useState)({shareDetail:!1}),L=(0,o.Z)(R,2),C=L[0],T=L[1],H=(0,s.useState)(!1),k=(0,o.Z)(H,2),b=k[0],I=k[1],U=(0,s.useState)([]),W=(0,o.Z)(U,2),q=W[0],V=W[1],P=(0,s.useState)(null),z=(0,o.Z)(P,2),Y=z[0],B=z[1],G=(0,s.useState)([]),K=(0,o.Z)(G,2),Q=K[0],X=K[1],$=(0,m.v9)((function(e){return{users:e.users.data,loading:e.users.loading,error:e.users.error}})),M=$.users,J=$.loading;$.error;(0,s.useEffect)((function(){me(F)}),[F,M]);var ee=(0,m.v9)((function(e){return{shareFolderLoading:e.share.shareFolderLoading,shareFolderSuccess:e.share.shareFolderSuccess,shareFolderError:e.share.shareFolderError,shareFileLoading:e.share.shareFileLoading,shareFileSuccess:e.share.shareFileSuccess,shareFileError:e.share.shareFileError,revokeFolderLoading:e.share.revokeFolderLoading,revokeFolderSuccess:e.share.revokeFolderSuccess,revokeFolderError:e.share.revokeFolderError,revokeFileLoading:e.share.revokeFileLoading,revokeFileSuccess:e.share.revokeFileSuccess,revokeFileError:e.share.revokeFileError}})),ne=ee.shareFolderLoading,re=ee.shareFolderSuccess,te=ee.shareFolderError,oe=ee.shareFileLoading,se=ee.shareFileSuccess,ae=ee.shareFileError,ie=ee.revokeFolderLoading,ce=ee.revokeFolderSuccess,ue=ee.revokeFolderError,le=ee.revokeFileLoading,de=ee.revokeFileSuccess,he=ee.revokeFileError;(0,s.useEffect)((function(){if(re||se){var e,n=Object.assign({},F);(e=n.sharedWith).push.apply(e,(0,t.Z)(q)),O.current.clear(),I(!1),A(n),D()}}),[ne,re,te,oe,se,ae]),(0,s.useEffect)((function(){if(ce||de){var e=Object.assign({},F);e.sharedWith=e.sharedWith.filter((function(e){if(e.email!==Y)return e})),I(!1),A(e),B(null),D()}}),[ie,ce,ue,le,de,he]),(0,s.useEffect)((function(){N(S.c.getConnectedUsers())}),[]);var me=function(e){var n=[],r=Object.assign({},e).sharedWith.map((function(e){return e.email}));M.map((function(e){return-1===r.indexOf(e.loginKey)&&n.push(e),!0})),X(n)};return(0,j.jsxs)(a.Z,{show:n,onHide:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",animation:!0,children:[(0,j.jsx)(a.Z.Header,{closeButton:!0,children:(0,j.jsxs)(a.Z.Title,{id:"contained-modal-title-vcenter",children:['Share "',(0,j.jsx)("b",{children:"".concat("myDocument"===E?F.folderName:F.documentName)}),'"']})}),(0,j.jsxs)(a.Z.Body,{className:"show-grid",children:[(0,j.jsx)(i.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(u.Z,{lg:12,md:6,className:"no_padding",children:(0,j.jsxs)(i.Z.Group,{as:u.Z,className:"mb-1 mt-4",children:[(0,j.jsx)(u.Z,{md:12,sm:12,children:(0,j.jsx)(f.pY,{isLoading:J,id:"public-methods-example",labelKey:"modifiedFirstName",multiple:!0,ref:O,allowNew:!0,newSelectionPrefix:"Not a Platform User: ",onChange:function(e){I(!0);var n=e.map((function(e){return{name:e.firstName,email:e.loginKey||e.firstName,isRegisterUser:!e.customOption,principleId:e.principleId,orgType:e.orgType,userOrgCode:e.orgCode}}));V(n)},options:Q})}),(0,j.jsx)("span",{style:{color:"red",paddingLeft:"1rem"},children:(0,j.jsx)("small",{children:C.shareDetail?"At least one recipient is required ":""})}),(0,j.jsx)(i.Z.Label,{className:"label_custom white",children:"Add People"})]})})})}),(0,j.jsxs)(u.Z,{sm:12,children:[(0,j.jsx)("p",{className:y.Z.people_share_with,children:"People with Access"}),(te||ae)&&(0,j.jsx)(l.Z,{placement:"right",delay:{show:250,hide:400},overlay:(0,j.jsx)(d.Z,{id:"tooltip-error",children:"Error in fetching"}),children:(0,j.jsx)(Z.CSE,{size:20,className:y.Z.details_warning})}),(!te||!ae)&&(ne||oe)&&(0,j.jsx)(p._5g,{size:20,className:"spinner ".concat(y.Z.details_warning)}),F.sharedWith&&F.sharedWith.length>0&&(0,j.jsx)("ul",{className:y.Z.share_with_ul,children:F.sharedWith.map((function(e,n){return(0,j.jsxs)("li",{className:y.Z.share_with_li,children:[(0,j.jsxs)("div",{className:y.Z.share_with_div,children:[(0,j.jsxs)("div",{className:"share_With_parent",style:{marginRight:"1rem"},children:[e.profilePicture&&(0,j.jsx)("img",{src:e.profilePicture,className:"profile_pic_account",alt:""}),!e.profilePicture&&(0,j.jsx)("span",{className:"shared_with ".concat(y.Z.share_with_span_pic),children:(0,j.jsx)("span",{children:e.name.charAt(0)})})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:y.Z.share_with_p,children:[e.userOrgCode||e.orgCode," - ",e.name]}),(0,j.jsx)("p",{className:y.Z.share_with_p,children:e.email})]})]}),(0,j.jsx)("div",{children:(0,j.jsxs)(h.Z,{className:y.Z.share_with_button,variant:"dark",onClick:function(){return function(e){var n={};n.email=e.email,B(e.email),N(g(n))}(e)},children:[(0,j.jsx)(p.Fuw,{size:20,style:{margin:"0 .5rem",cursor:"pointer"}}),"Revoke Access"]})})]},"li_".concat(n))}))}),F.sharedWith&&0===F.sharedWith.length&&(0,j.jsx)("p",{style:{textAlign:"center"},children:"No record Found"})]})]}),(0,j.jsx)(a.Z.Footer,{children:(0,j.jsx)(h.Z,{variant:"dark",style:{width:"100%"},disabled:!b,onClick:function(){var e={};e.shareDetail=q,function(e){var n=!0,r={shareDetail:!1};for(var t in e)e[t]&&""!==e[t]||(r[t]=!0),0===e.shareDetail.length&&(r.shareDetail=!0);for(var o in r)r[o]&&(n=!1);return T(r),n}(e)&&("documents"===E?(e.documentId=F.id,N(_(e))):(e.clientAccountNo=F.folderName,N(x(e))))},children:"Share"})})]})}},5333:function(e,n,r){r.r(n);var t=r(4165),o=r(5861),s=r(1413),a=r(885),i=r(2791),c=r(2677),u=r(9743),l=r(3360),d=r(2092),h=r(6030),m=r(7122),f=r(9369),p=r(8192),y=r(3619),S=r(3363),E=r(8803),D=r(3926),x=r(1679),_=r(7382),g=r(7919),Z=r(4663),j=r(7445),v=r(2296),w=r(184);n.default=function(e){var n=e.location,r=(0,h.I0)(),F=(0,d.e1)().addToast,A=(0,i.useRef)(),N=new URLSearchParams(n.search).get("account_id"),O=(0,i.useState)(!1),R=(0,a.Z)(O,2),L=R[0],C=R[1],T=(0,i.useState)("documentName"),H=(0,a.Z)(T,2),k=H[0],b=H[1],I=(0,i.useState)("desc"),U=(0,a.Z)(I,2),W=U[0],q=U[1],V=(0,i.useState)(10),P=(0,a.Z)(V,2),z=P[0],Y=P[1],B=(0,i.useState)(1),G=(0,a.Z)(B,2),K=G[0],Q=G[1],X=(0,i.useState)(!1),$=(0,a.Z)(X,2),M=$[0],J=$[1],ee=(0,i.useState)(!1),ne=(0,a.Z)(ee,2),re=ne[0],te=ne[1],oe=(0,i.useState)(null),se=(0,a.Z)(oe,2),ae=se[0],ie=se[1],ce=(0,i.useState)([]),ue=(0,a.Z)(ce,2),le=ue[0],de=ue[1],he=(0,i.useState)(!1),me=(0,a.Z)(he,2),fe=me[0],pe=me[1],ye=(0,i.useState)(null),Se=(0,a.Z)(ye,2),Ee=Se[0],De=Se[1],xe=(0,i.useState)(null),_e=(0,a.Z)(xe,2),ge=_e[0],Ze=_e[1],je=(0,Z.Z)(),ve=(0,a.Z)(je,2),we=ve[0],Fe=ve[1],Ae=Fe.setInitObj,Ne=Fe.textSearch,Oe=Fe.advanceSearch,Re=Fe.resetHandler,Le=(0,h.v9)((function(e){return{documents:e.myDocuments.documents.data,totalCount:e.myDocuments.documents.totalCount,error:e.myDocuments.documents.error,columns:e.myDocuments.documents.columns,loading:e.myDocuments.documents.loading,defaultColumns:e.misc.allTableColumns.data,deleteRequest:e.myDocuments.documents.deleteRequest,deleteSuccess:e.myDocuments.documents.deleteSuccess,deleteError:e.myDocuments.documents.deleteError,downloadRequest:e.myDocuments.documentDownload.loading,downloadError:e.myDocuments.documentDownload.error,downloadSuccess:e.myDocuments.documentDownload.success,downloadLink:e.myDocuments.documentDownload.downloadLink}})),Ce=Le.documents,Te=Le.totalCount,He=(Le.error,Le.columns),ke=Le.loading,be=Le.defaultColumns,Ie=(Le.deleteRequest,Le.deleteSuccess),Ue=Le.deleteError,We=Le.downloadRequest,qe=Le.downloadError,Ve=Le.downloadSuccess,Pe=Le.downloadLink;(0,i.useEffect)((function(){return Ae({pageSize:z,pageNumber:K,textSearch:null,sortOrder:W,sortParam:k}),r(v.v.getColumnForAllTables("document")),function(){r(y.p.resetDocumentList())}}),[]),(0,i.useEffect)((function(){null!==we&&ze(z,K)}),[we,k,W]),(0,i.useEffect)((function(){!ke&&0===(null===He||void 0===He?void 0:He.length)&&be&&be.length>0?de(be):de(He)}),[He]),(0,i.useEffect)((function(){Ie&&(F((0,x.t)("success","deleted","Document"),{appearance:"success",autoDismiss:!0}),pe(!1),ze(z,K)),Ue&&F((0,x.t)("error","deleting","document"),{appearance:"error",autoDismiss:!1})}),[Ie,Ue]);var ze=function(e,n){we=(0,s.Z)((0,s.Z)({},we),{},{pageSize:e,pageNumber:n,accountNumber:N,sortParam:k,sortOrder:W}),r(y.p.getMyDocumentList(we)),C(!1)},Ye=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F((0,x.t)("info","DOWNLOAD_STARTED",""),{appearance:"info",autoDismiss:!0}),e.next=3,(0,E.Ce)(n);case 3:r(j.w.saveDownloadHistory([n.id])),F((0,x.t)("info","DOWNLOAD_SUCCESSFUL",""),{appearance:"success",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){!We&&Ve&&Pe&&((0,E.f2)(Pe),r(y.p.restDownloadDocument()))}),[We,qe,Ve,Pe]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("a",{href:"",ref:A,target:"_self"}),(0,w.jsxs)(c.Z,{sm:12,children:[(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(D.Z,{parentComponent:"documents",Styles:m.Z,showAdvanceSearch:L,setShowAdvanceSearch:function(e){return C(e)},textSearchHook:Ne,searchObj:we,advanceSearchHook:Oe,resetHandlerHook:Re}),(0,w.jsx)(c.Z,{md:2,sm:2,children:(0,w.jsx)(l.Z,{variant:"dark",style:{width:"100%"},onClick:function(){return J(!0)},children:"Upload Document"})})]}),(0,w.jsx)("br",{})]}),(0,w.jsx)(c.Z,{children:(0,w.jsx)(f.Z,{data:Ce,isLoading:ke,map:{name:"Name",documentType:"Document Type",originalAccountNo:"Original Account Number",equabliAccountNo:"Equabli Account Number",clientAccountNo:"Client Account Number",generateDate:"Generated Date",uploadDate:"Upload Date",shareDate:"Share Date",receiveDate:"Receive Date",fileSize:"File Size",sharedBy:"Shared By",sharedWith:"Shared With"},totalCount:Te,actionArray:["name"],handleNavigate:function(e){te(!0),ie(e)},currencyColumns:[],sortElement:function(e){return b(e)},sortType:function(e){return q(e)},currentPage:K,setCurrentPage:Q,parentComponent:"documents",searchCriteria:{},hideShareArray:le,addEditArray:{download:function(e){return Ye(e)},share:function(e){return Ze(e)},view:function(e){te(!0),ie(e)},delete:function(e){return De(e),void pe(!0)}},onPaginationChange:function(e,n){return function(e,n){Y(e),ze(e,n)}(e,n)}})}),M&&(0,w.jsx)(p.Z,{show:M,onHide:function(){return J(!1)},accountId:123,Styles:m.Z,parentComponent:"documents",search:ze,details:{accountId:N}}),re&&(0,w.jsx)(S.Z,{show:re,onHide:function(){return te(!1)},documentData:ae}),fe&&(0,w.jsx)(_.Z,{show:fe,onHide:function(){return pe(!1)},confirmDelete:function(){r(y.p.deleteDocument(Ee.id))},details:Ee,type:"documents"}),ge&&(0,w.jsx)(g.Z,{show:ge,parentComponent:"documents",onHide:function(){return Ze(null)},searchHandler:function(){return ze(z,K)}})]})}},7445:function(e,n,r){r.d(n,{w:function(){return s}});var t=r(758),o=r(2453),s={getDownloadHistory:function(e){return function(n){n({type:t.oe.GET_DOWNLOAD_HISTORY_REQUEST}),o.OA.getDownloadHistory(e).then((function(e){n(function(e){return{type:t.oe.GET_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.oe.GET_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))}))}},saveDownloadHistory:function(e){return function(n){n({type:t.Fq.SAVE_DOWNLOAD_HISTORY_REQUEST}),o.OA.saveDownloadHistory(e).then((function(e){n(function(e){return{type:t.Fq.SAVE_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.Fq.SAVE_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))})).finally((function(){return n({type:t.Fq.SAVE_DOWNLOAD_HISTORY_RESET})}))}},deleteDownloadHistory:function(e){return function(n){n({type:t.wA.DELETE_DOWNLOAD_HISTORY_REQUEST}),o.OA.deleteDownloadHistory(e).then((function(e){n(function(e){return{type:t.wA.DELETE_DOWNLOAD_HISTORY_SUCCESS,payload:e}}(e))}),(function(e){n(function(e){return{type:t.wA.DELETE_DOWNLOAD_HISTORY_FAILURE,payload:e}}(e))})).finally((function(){return n({type:t.wA.DELETE_DOWNLOAD_HISTORY_RESET})}))}}}}}]);
//# sourceMappingURL=618.bb4df9e8.chunk.js.map