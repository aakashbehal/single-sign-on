(this["webpackJsonpequabli-front-end"]=this["webpackJsonpequabli-front-end"]||[]).push([[13],{271:function(e,t,a){"use strict";var n=a(60),c=a(6),r=a.n(c),s=a(10),o=a(14),i=a(1),l=a.n(i),u=a(252),d=a(334),p=a(170),m=a(168),b=a(267),f=a(40),j=a(286),O=a(285),h=a(21),y=a(32),g=a(115),x=a(299),v=a(132),S=a(5),N=a(261),k=function(e){var t=Object(i.useState)(null),n=Object(o.a)(t,2),c=n[0],l=n[1];return[c,{zipTargetFiles:function(){var e=Object(s.a)(r.a.mark((function e(t){var n,c,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,1===t.length)l({zipFile:n,file:t[0]});else{for(c=a(177)(),s=null,o=0;o<t.length;o++)"matrix.xlsx"===t[o].name&&(s=t[o]),"application/zip"!==t[o].type&&"application/x-zip-compressed"!==t[o].type||(n=t[o]),n||"matrix.xlsx"===t[o].name||c.file(t[o].name,t[o]);n?l({matrixFile:s,file:n}):c.generateAsync({type:"blob"}).then((function(e){return new File([e],"new.zip",{type:"application/x-zip-compressed"})})).then((function(e){l({matrixFile:s,file:e})}))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]},w=a(3),D=[{"Document Type":"","Portfolio id":"","Original Account Number":"","Client Account Number":"","Document Generation Date":"","Equabli Account Number":"","File Name":""}];t.a=function(e){var t=e.show,a=e.onHide,c=(e.accountId,e.Styles),C=e.parentComponent,q=e.search,z=e.details,T=void 0===z?null:z,F=Object(y.useToasts)().addToast,A=Object(h.b)(),_=k(null),R=Object(o.a)(_,2),U=R[0],E=R[1].zipTargetFiles,P=l.a.useState(!1),H=Object(o.a)(P,2),I=H[0],J=H[1],L=l.a.useRef(null),M=Object(i.useState)([]),B=Object(o.a)(M,2),G=B[0],V=B[1],W=Object(i.useState)(!1),K=Object(o.a)(W,2),Q=K[0],X=K[1],Y=Object(i.useState)({fileLengthSingle:!1,fileSize:!1}),Z=Object(o.a)(Y,2),$=Z[0],ee=Z[1],te=Object(i.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],re=Object(i.useState)({}),se=Object(o.a)(re,2),oe=se[0],ie=se[1];Object(i.useEffect)((function(){"documentNotSummary_request"===C&&le()}),[]),Object(i.useEffect)((function(){U&&"{}"!==JSON.stringify(U)&&pe()}),[U]);var le=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("document-service/api","/user/document/summary/accounts/not"),{pageSize:T.pageSize,pageNumber:T.pageNumber-1,docTypeCode:T.docTypeCode,tenture:"null"===T.tenture?null:T.tenture,portfolio:"null"===T.portfolio?null:T.portfolio,productCode:"null"===T.productCode?null:T.productCode,userId:"null"===T.userId?null:T.userId});case 3:t=e.sent,a=Object(S.k)(t),n=a&&a.response&&a.response.datas.map((function(e){return{"Document Type":T.docTypeCode,"Requested From":"","Original Account Number":"","Client Account Number":e,"Equabli Account Number":""}})),ie(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ue=function(e){var t=!0,a={file:!1};for(var n in 0===e.file&&(a.fileLengthSingle=!0),e)e[n]&&""!==e[n]||(a[n]=!0);for(var c in a)a[c]&&(t=!1);return ee(a),t},de=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),ue({file:G.length})&&(X(!0),E(G));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n,c,s,o,i,l,u,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce(!1),t={headers:{"Content-Type":"multipart/form-data"}},n="".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload"),c=U.file,s=U.matrixFile,!("myDocument"===C&&G.length>1)||s){e.next=8;break}return X(!1),ce(!0),e.abrupt("return");case 8:if(o=new FormData,e.prev=9,"application/zip"!==c.type&&"application/x-zip-compressed"!==c.type){e.next=28;break}return o.append("files",c),o.append("files",s),o.append("fileUploadJson",JSON.stringify({bulkType:"upload"})),n="".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload/bulk"),e.next=17,S.a.post(n,o,t);case 17:return i=e.sent,l=Object(S.k)(i),e.next=21,S.a.post("".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload/bulk/read"),{orgType:"CT",excelUrl:l.response.fileUrl[1],zipUrl:l.response.fileUrl[0],bulkType:"upload"});case 21:u=e.sent,Object(S.k)(u),F(Object(v.a)("success","uploaded","File"),{appearance:"success",autoDismiss:!0}),X(!1),a(),e.next=36;break;case 28:return"receiveDocumentRequest"===C&&null!==T?(n="".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload/fullfill"),o.append("file",c),o.append("id",JSON.stringify(T.id))):"sentDocumentRequest"===C||"documentNotSummary_request"===C?(n="".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload/bulk"),o.append("files",c),o.append("fileUploadVan",JSON.stringify({bulkType:"SendRequestDocument"}))):"documentNotSummary"===C?(n="".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/upload/specific/accounts"),d={docTypeCode:T.docTypeCode},console.log(d),o.append("file",c),o.append("data",JSON.stringify(d))):o.append("file",c),e.next=31,S.a.post(n,o,t);case 31:p=e.sent,Object(S.k)(p),F(Object(v.a)("success","uploaded","File"),{appearance:"success",autoDismiss:!0}),X(!1),a();case 36:A(N.a.getReceiveSummary()),A(N.a.getSentSummary()),q(),e.next=46;break;case 41:throw e.prev=41,e.t0=e.catch(9),X(!1),F(Object(v.a)("error","uploading","file"),{appearance:"error",autoDismiss:!1}),e.t0;case 46:case"end":return e.stop()}}),e,null,[[9,41]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?J(!0):"dragleave"===e.type&&J(!1)},be=function(e){var t=Object.assign([],G);t=0===t.length?Array.from(e):[].concat(Object(n.a)(t),Object(n.a)(Array.from(e))),V(t)},fe=function(){L.current.click()};return Object(w.jsxs)(u.a,{show:t,onHide:a,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",animation:!0,children:[Object(w.jsx)(u.a.Header,{closeButton:!0,children:Object(w.jsxs)(u.a.Title,{id:"contained-modal-title-vcenter",children:["myDocument"===C||"documents"===C||"documentNotSummary"===C||"documentNotSummary_request"===C?"Upload New Document":"sentDocumentRequest"===C?"Upload file for bulk document request":"","receiveDocumentRequest"===C&&"Upload File to FulFill the request"]})}),Object(w.jsx)(u.a.Body,{className:"show-grid",children:Object(w.jsx)(d.a,{children:Object(w.jsxs)(p.a,{sm:12,children:[Object(w.jsx)("div",{className:c.list_upload_container,children:G&&G.length>0&&G.map((function(e,t){return Object(w.jsx)("div",{className:c.list_upload,children:Object(w.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["application/pdf"===e.type&&Object(w.jsx)(b.e,{}),("image/png"===e.type||"image/jpeg"===e.type)&&Object(w.jsx)(b.g,{}),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type&&Object(w.jsx)(O.a,{}),Object(w.jsx)("span",{style:{marginLeft:".5rem"},children:e.name})]}),Object(w.jsx)(j.a,{onClick:function(){return function(e){var t=Object.assign([],G);t.splice(e,1),V(t)}(t)},size:25,style:{marginRight:".5rem",color:"red",cursor:"pointer"}})]})},"file_".concat(t))}))}),Object(w.jsxs)(p.a,{md:12,sm:12,children:[Object(w.jsxs)("form",{id:"form-file-upload",onDragEnter:me,onSubmit:function(e){return e.preventDefault()},children:[Object(w.jsx)("input",{ref:L,type:"file",id:"input-file-upload",accept:"image/png, image/jpeg, application/pdf, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",multiple:!0,onChange:function(e){e.preventDefault(),e.target.files&&e.target.files[0]&&be(e.target.files)}}),Object(w.jsx)("label",{id:"label-file-upload",className:I?"drag-active":"",children:Object(w.jsxs)("div",{children:[Object(w.jsx)(f.c,{size:60,color:"#5070e1",onClick:fe,cursor:"pointer"}),Object(w.jsxs)("p",{style:{fontSize:"1.5rem",color:"#99a2b0",margin:0},children:["Drop Files here or ",Object(w.jsx)("span",{onClick:fe,style:{color:"#5070e1",fontWeight:"bold",fontSize:"2.2rem",cursor:"pointer"},children:"Click here"})]}),Object(w.jsx)("p",{style:{color:"#b0b8c3"},children:"*Please note that png, jpeg, pdf files are allowed"})]})}),I&&Object(w.jsx)("div",{id:"drag-file-element",onDragEnter:me,onDragLeave:me,onDragOver:me,onDrop:function(e){e.preventDefault(),e.stopPropagation(),J(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&be(e.dataTransfer.files)}})]}),Object(w.jsx)("span",{className:c.form_error,children:Object(w.jsx)("small",{children:$.fileLengthSingle?"File is required":""})}),Object(w.jsx)("span",{className:c.form_error,children:Object(w.jsx)("small",{children:ne?"Matrix File is required":""})})]})]})})}),Object(w.jsxs)(u.a.Footer,{style:{padding:"1rem 4rem 2rem"},className:"sent_bulk_request",children:[Q&&Object(w.jsx)(f.d,{size:20,className:"spinner ".concat(c.details_warning)}),Object(w.jsx)(p.a,{sm:12,className:"no_padding",children:Object(w.jsx)(m.a,{variant:"dark",type:"submit",disabled:Q,onClick:de,style:{width:"100%"},children:"Upload"})}),"myDocument"===C&&G.length>1&&Object(w.jsxs)(p.a,{sm:12,className:"no_padding",children:[Object(w.jsx)("br",{}),Object(w.jsxs)("p",{children:["Please download the ",Object(w.jsx)("b",{children:"Matrix file"})," and update the columns to help system establish connection between the files being uploaded and system."]}),Object(w.jsx)(p.a,{sm:12,className:"no_padding",children:Object(w.jsx)(m.a,{variant:"dark",type:"submit",onClick:function(){return Object(x.a)(D,"matrix")},style:{width:"100%"},children:"Download Sample File"})})]}),"documentNotSummary_request"===C&&Object(w.jsxs)(p.a,{sm:12,className:"no_padding",children:[Object(w.jsx)("br",{}),Object(w.jsxs)("p",{children:["Please download the ",Object(w.jsx)("b",{children:"Matrix file"})," and update the columns to help system establish connection between the files being uploaded and system."]}),Object(w.jsx)(p.a,{sm:12,className:"no_padding",children:Object(w.jsx)(m.a,{variant:"dark",type:"submit",onClick:function(){return Object(x.a)(oe,"matrix")},style:{width:"100%"},children:"Download Sample File"})})]}),"sentDocumentRequest"===C&&Object(w.jsxs)(p.a,{sm:12,className:"no_padding",children:[Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Please download the sample file to get idea about the fields you need to pass to raise bulk document request"}),Object(w.jsx)(p.a,{sm:12,className:"no_padding",children:Object(w.jsx)(m.a,{variant:"dark",type:"submit",onClick:function(){var e="";e="myDocument"===C?"./sample_file_upload.xlsx":"".concat("http://k8s-equablid-equablii-3d7f80b23b-1277713601.us-east-1.elb.amazonaws.com","/").concat("file-action-service/api","/file/download"),S.a.get(e,{responseType:"arraybuffer"}).then((function(e){var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Object(g.saveAs)(t,"SendRequestDocumentSample.xlsx")}))},style:{width:"100%"},children:"Download Sample File"})})]})]})]})}},338:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(14),r=a(1),s=a(170),o=a(251),i=a(168),l=a(21),u=a(260),d=a.n(u),p=a(263),m=a(271),b=a(272),f=a(270),j=a(264),O=a(261),h=a(265),y=a(3);t.default=function(e){var t=e.location,a=Object(l.b)(),u=t.search.replace("?",""),g=JSON.parse('{"'+decodeURI(u).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),x=Object(r.useState)(!1),v=Object(c.a)(x,2),S=v[0],N=v[1],k=Object(r.useState)("uploadDate"),w=Object(c.a)(k,2),D=w[0],C=w[1],q=Object(r.useState)("desc"),z=Object(c.a)(q,2),T=z[0],F=z[1],A=Object(r.useState)(10),_=Object(c.a)(A,2),R=_[0],U=_[1],E=Object(r.useState)(1),P=Object(c.a)(E,2),H=P[0],I=P[1],J=Object(r.useState)(!1),L=Object(c.a)(J,2),M=L[0],B=L[1],G=Object(r.useState)(!1),V=Object(c.a)(G,2),W=V[0],K=V[1],Q=Object(r.useState)(!1),X=Object(c.a)(Q,2),Y=X[0],Z=X[1],$=Object(r.useState)(null),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(r.useState)([]),ce=Object(c.a)(ne,2),re=ce[0],se=ce[1],oe=Object(h.a)(),ie=Object(c.a)(oe,2),le=ie[0],ue=ie[1],de=ue.setInitObj,pe=ue.textSearch,me=ue.advanceSearch,be=ue.resetHandler,fe=Object(l.c)((function(e){return{documents:e.summary.summaryDocumentsNot.data,totalCount:e.summary.summaryDocumentsNot.totalCount,error:e.summary.summaryDocumentsNot.error,columns:e.summary.summaryDocumentsNot.columns,loading:e.summary.summaryDocumentsNot.loading,defaultColumns:e.misc.allTableColumns.data}})),je=fe.documents,Oe=fe.totalCount,he=(fe.error,fe.columns),ye=fe.loading,ge=fe.defaultColumns;Object(r.useEffect)((function(){return de({pageSize:R,pageNumber:H,textSearch:null,sortOrder:T,sortParam:D}),function(){a(b.a.resetDocumentList())}}),[]),Object(r.useEffect)((function(){null!==le&&xe(R,H)}),[le,D,T]),Object(r.useEffect)((function(){if(!ye&&0===he.length&&ge&&ge.length>0){var e=ge.filter((function(e){if("accounts"===e.tableName)return e}));se(e[0].columnNames)}else se(he)}),[he]);var xe=function(e,t){le=Object(n.a)(Object(n.a)({},le),{},{pageSize:e,pageNumber:t,docTypeCode:g.docTypeCode,sortParam:D,sortOrder:T}),a(O.a.getSummaryDrillDownNot(le)),N(!1)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(s.a,{sm:12,children:[Object(y.jsxs)(o.a,{children:[Object(y.jsx)(j.a,{parentComponent:"documentNotSummary",Styles:d.a,showAdvanceSearch:S,setShowAdvanceSearch:function(e){return N(e)},textSearchHook:pe,searchObj:le,advanceSearchHook:me,resetHandlerHook:be}),Object(y.jsx)(s.a,{md:2,sm:2,children:Object(y.jsxs)(i.a,{variant:"dark",style:{width:"100%"},onClick:function(){return K(!0)},children:["Request ",g.docTypeCode," for ",g.inComplete," Accounts"]})}),Object(y.jsx)(s.a,{md:2,sm:2,children:Object(y.jsxs)(i.a,{variant:"dark",style:{width:"100%"},onClick:function(){return B(!0)},children:["Upload ",g.docTypeCode," for ",g.inComplete," Accounts"]})})]}),Object(y.jsx)("br",{})]}),Object(y.jsx)(s.a,{children:Object(y.jsx)(p.a,{data:je,isLoading:ye,map:{clientAccountNumber:"Client Account Number",originalAccountNumber:"Original Account Number",equabliAccountNumber:"Equabli Account Number",fileName:"File Name",generateDate:"Generation Date",uploadDate:"Upload Date"},totalCount:Oe,actionArray:[],handleNavigate:function(e){Z(!0),ae(e)},currencyColumns:[],sortElement:function(e){return C(e)},sortType:function(e){return F(e)},currentPage:H,setCurrentPage:I,parentComponent:"documentNotSummary",searchCriteria:{},hideShareArray:re,addEditArray:{download:function(e){return console.log(e)}},handleDocumentManagerSummary:g,onPaginationChange:function(e,t){return function(e,t){U(e),xe(e,t)}(e,t)}})}),W&&Object(y.jsx)(m.a,{show:W,onHide:function(){return K(!1)},accountId:123,Styles:d.a,parentComponent:"documentNotSummary_request",search:xe,details:Object(n.a)(Object(n.a)({},g),{},{pageSize:Oe})}),M&&Object(y.jsx)(m.a,{show:M,onHide:function(){return B(!1)},accountId:123,Styles:d.a,parentComponent:"documentNotSummary",search:xe,details:Object(n.a)(Object(n.a)({},g),{},{pageSize:Oe})}),Y&&Object(y.jsx)(f.a,{show:Y,onHide:function(){return Z(!1)},documentData:te})]})}}}]);